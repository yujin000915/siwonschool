<!DOCTYPE html>
<html lang="ko">
	<head>
		<!-- meta -->
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- css -->
		<link rel="stylesheet"  href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
		<link rel="stylesheet" href="./css/reset.css">
		<link rel="stylesheet" href="./css/toeicpack.min.css">

		<!-- script -->
		<script src="//unpkg.com/swiper@7/swiper-bundle.min.js"></script>
		<script src="//code.jquery.com/jquery-3.6.1.min.js"></script>

		<!-- title -->
		<title>ì‹œì›ìŠ¤ì¿¨LAB í† ìµí•™ìŠµì§€</title>
	</head>

	<body>
		<canvas id="canvas" width="1080" height="1000"></canvas>

		<!-- npmìœ¼ë¡œ ì„¤ì¹˜í•œ ê²ƒ ì²˜ëŸ¼ ì‚¬ìš©ê°€ëŠ¥ -->
		<script type="importmap">
			{
				"imports": {
					"three": "https://unpkg.com/three@0.141.0/build/three.module.js",
						"GLTFLoader": "https://unpkg.com/three@0.141.0/examples/jsm/loaders/GLTFLoader.js",
						"OrbitControls": "https://unpkg.com/three@0.141.0/examples/jsm/controls/OrbitControls.js"
				}
			}
		</script>

		<script type="module">
			import * as THREE from 'three';
			import { GLTFLoader } from 'GLTFLoader'; // gltf ì´ë¯¸ì§€ ì‚¬ìš©
			import { OrbitControls } from 'OrbitControls'; // ë§ˆìš°ìŠ¤ ì»¨íŠ¸ë¡¤

			let scene = new THREE.Scene();
			let renderer = new THREE.WebGLRenderer({
				canvas: document.querySelector('#canvas'),
				antialias: true // í…Œë‘ë¦¬ ê³„ë‹¨í˜„ìƒ ì œê±°
			});
			renderer.outputEncoding = THREE.sRGBEncoding; // ìƒ‰ ë°ê²Œ

			let camera = new THREE.PerspectiveCamera(30, 1); // ì›ê·¼ë²• ì ìš© (ì›ê·¼ë²• ë¬´ì‹œ:OrthographicCamera)
			camera.position.set(0, 0, 1) // ìˆ«ìê°€ í´ìˆ˜ë¡ ë©€ì–´ì§

			scene.background = new THREE.Color('white'); // ì¡°ëª… & ë°°ê²½
			let light = new THREE.DirectionalLight(0xffff00, 2);
			scene.add(light);

			// OrbitControls ìƒì„± ë° ì„¤ì •
			let controls = new OrbitControls(camera, renderer.domElement);
			controls.enableDamping = true; // ë¶€ë“œëŸ¬ìš´ ê°ì† ì„¤ì •
			controls.dampingFactor = 0.05; // ê°ì† ê³„ìˆ˜ ì„¤ì •
			controls.rotateSpeed = 0.5; // íšŒì „ ì†ë„ ì„¤ì •
			controls.zoomSpeed = 0.5; // ì¤Œ ì†ë„ ì„¤ì •
			controls.panSpeed = 0.5; // íŒ¨ë‹ ì†ë„ ì„¤ì •

			let loader = new GLTFLoader(); // GLTF íŒŒì¼ ê°€ì ¸ì˜¤ëŠ” ë²•
			loader.load('image/3d/package/scene.gltf', function(gltf){
				scene.add(gltf.scene);

				function animate(){
					requestAnimationFrame(animate)
					gltf.scene.rotation.y += 0.01; // +=ëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œ -=ëŠ” ì™¼ìª½ìœ¼ë¡œ
					controls.update(); // ë§ˆìš°ìŠ¤ ì»¨íŠ¸ë¡¤ ì ìš©
					renderer.render(scene, camera);
					// ì—¬ê¸°ì— ì ìœ¼ë©´ 1ì´ˆì— 60ë²ˆ ì‹¤í–‰ë¨
				} // ë§ˆìš°ìŠ¤ ì»¨íŠ¸ë¡¤ì€ OrbitControl ê°€ì ¸ë‹¤ê°€ ì“°ë©´ ë¨.

				animate()
			});
		</script>

		<!--
			three.jsì°¸ê³ 
			https://www.youtube.com/watch?v=CojyGfCMvuU
		 -->

		<!-- <canvas id="scroll_pass"></canvas>

		<div class="vid_max">
			<iframe width="1920" height="1080" src="//www.youtube.com/embed/Ih7YZPvb5gM" title="[ì‹œì›ìŠ¤ì¿¨ë©Xì¥ê·œë¦¬] í† ìµ ì‹œì‘í•  ë• ì‹œì›ìŠ¤ì¿¨í† ìµí•™ìŠµì§€ ğŸ“•" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
		</div> -->
	</bod>
</html>

<script>
	// ìŠ¤í¬ë¡¤
	// window.addEventListener("scroll", (event) => {
	// 	let scroll = this.scrollY;
	// 	console.log(scroll)

	// 	if ( scroll >= 3500 ) {
	// 		const vidSrc = '//www.youtube.com/embed/Ih7YZPvb5gM?autoplay=1&loop=1&playlist=Ih7YZPvb5gM';
	// 		$('.vid_max').css('z-index', '3');
	// 		$('.vid_max iframe').attr('src', vidSrc);
	// 	} else {
	// 		$('#scroll_pass').css('z-index', '2');
	// 	}
	// });

	// const html = document.documentElement;
	// const canvas = document.getElementById("scroll_pass");
	// const context = canvas.getContext("2d");

	// const frameCount = 52;
	// const currentFrame = index => ( `/image/dummy/toeic900_${index}.jpg` )

	// const preloadImages = () => {
	// 	for (let i = 1; i < frameCount; i++) {
	// 		const img = new Image();
	// 		img.src = currentFrame(i);

	// 		return false;
	// 	}
	// };

	// const img = new Image()
	// 	img.src = currentFrame(1);
	// 	canvas.width = 1920;
	// 	canvas.height = 1080;
	// 	img.onload=function(){
	// 	context.drawImage(img, 0, 0);
	// }

	// const updateImage = index => {
	// 	img.src = currentFrame(index);
	// 	context.drawImage(img, 0, 0);
	// }

	// window.addEventListener('scroll', () => {
	// 	const scrollTop = html.scrollTop;
	// 	const maxScrollTop = html.scrollHeight - window.innerHeight;
	// 	const scrollFraction = scrollTop / maxScrollTop;
	// 	const frameIndex = Math.min(
	// 		frameCount - 1,
	// 		Math.ceil(scrollFraction * frameCount)
	// 	);

	// 	requestAnimationFrame(() => updateImage(frameIndex + 1));
	// });

	// preloadImages();
</script>
